<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>2&nbsp;Day 1: Getting up and running</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><link rel="stylesheet" type="text/css" href="style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Learning Haskell</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Day_0__A_whole_lot_of_nothing.html" class="tocviewlink" data-pltdoc="x">Day 0:<span class="mywbr"> &nbsp;</span> A whole lot of nothing</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Day 1:<span class="mywbr"> &nbsp;</span> Getting up and running</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Day 1:<span class="mywbr"> &nbsp;</span> Getting up and running</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._.Hello_again__.Haskell_%29" class="tocviewlink" data-pltdoc="x">Hello again, Haskell.</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Hello_again__.Haskell_%29" class="tocsubseclink" data-pltdoc="x">Hello again, Haskell.</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Day_0__A_whole_lot_of_nothing.html" title="backward to &quot;1 Day 0: A whole lot of nothing&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Learning Haskell&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._.Day_1__.Getting_up_and_running)"></a>Day 1: Getting up and running</h3><p>Alright. So. I&rsquo;m going to try this again. Starting from scratch and doing it right this time.</p><p>I&rsquo;ll spare you the gory details, but to make a long story short, it worked!</p><blockquote class="code-tty"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">$ ghc-mod</span></p></td></tr><tr><td><p><span class="stt">ghc-mod: No command given (try --help)</span></p></td></tr></table></blockquote><p>Now we&rsquo;re talking. Time to run a simple <span class="stt">cabal &#8209;&#8209;init</span>, and finally, <span style="font-style: italic">finally</span> I&rsquo;m able
to actually work in a reasonable environment.</p><p>So. Here I am. What now?</p><h4>2.1<tt>&nbsp;</tt><a name="(part._.Hello_again__.Haskell_)"></a>Hello again, Haskell.</h4><p>Alright, so, here&rsquo;s the thing: I&rsquo;m not very good at Haskell. In fact, I barely know the language. I
know it well enough to write your usual simple programs&#8212;fibonacci numbers, factorial functions,
etc.&#8212;so I&rsquo;m not going in completely cold. That said, this language is probably a little too
complicated for me to just blindly charge into on my own.</p><p>After a little bit of looking around, I found a <a href="http://www.seas.upenn.edu/~cis194/">pretty neat Haskell course offered by UPenn</a>. All the lecture notes and homework assignments are
online, so this seems like a reasonable way to get a guided introduction to the language. I&rsquo;ve heard
the name <span style="font-style: italic">Real World Haskell</span> thrown around a few times, so maybe I&rsquo;ll look into that next, but
first I just want to reacquaint myself with this language.</p><p>Alright. Homework assignment one! I took a brief glance at the lecture notes, but I didn&rsquo;t really read
them&#8212;I think I remember enough to at least complete whatever this assignment is. We&rsquo;ll see if I&rsquo;m
wrong.</p><p>So apparently, this homework assignment is about implementing an algorithm to validate credit card
numbers. Seems straightforward enough. First, it wants me to implement <span class="stt">lastDigit</span> and
<span class="stt">dropLastDigit</span> functions. Let&rsquo;s give this a shot.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">lastDigit :: Integer -&gt; Integer</span></p></td></tr><tr><td><p><span class="stt">lastDigit = `mod` 10</span></p></td></tr></table></blockquote><p>I was feeling pretty good about myself. I remembered backticks for infix notation and that I can use
partial application of operators&rsquo; second arguments! I can already see the road to hell is paved with
point-free style. Anyway, despite my jubilations, that doesn&rsquo;t even work&#8212;GHC complains about a parse
error. Maybe I need more parens?</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">lastDigit :: Integer -&gt; Integer</span></p></td></tr><tr><td><p><span class="stt">lastDigit = (`mod` 10)</span></p></td></tr></table></blockquote><p>And it works! Perfect. Now let me try <span class="stt">dropLastDigit</span>. Armed with my newfound knowledge, this
should be a snap.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">dropLastDigit :: Integer -&gt; Integer</span></p></td></tr><tr><td><p><span class="stt">dropLastDigit = (/ 10)</span></p></td></tr></table></blockquote><p>Hmm. That doesn&rsquo;t work, either, complaining about type mismatches and missing instantiations. My gut
tells me that this is because <span class="stt">/</span> probably performs non-integral division, and GHC doesn&rsquo;t like
that I&rsquo;m throwing the precision away. Or maybe it flat-out doesn&rsquo;t work on integers? I&rsquo;m not sure.</p><p>What I <span style="font-style: italic">do</span> remember is that <a href="https://www.haskell.org/hoogle/">Hoogle</a> exists, and
it&rsquo;s awesome. I try a quick query for <span class="stt">Integer -&gt; Integer -&gt; Integer</span>, which nets me nothing
related to division. Oh, well. It was worth a shot. In desperation, I decided to type in <span class="stt">divison</span>,
and as I was doing so, <span class="stt">div</span> appeared before my eyes, which apparently has the type <span class="stt">Integral a
=&gt; a -&gt; a -&gt; a</span>. I&rsquo;m not sure why that didn&rsquo;t come up in my other search. I guess there were just too
many other results.</p><p>Anyway, using <span class="stt">div</span> does what I want.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">dropLastDigit :: Integer -&gt; Integer</span></p></td></tr><tr><td><p><span class="stt">dropLastDigit = (`div` 10)</span></p></td></tr></table></blockquote><p>Alright, what&rsquo;s next? A function to split a number into its digits in reverse order called, not
surprisingly, <span class="stt">toRevDigits</span>. I think I remember enough about Haskell to make this work.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">toRevDigits :: Integer -&gt; [Integer]</span></p></td></tr><tr><td><p><span class="stt">toRevDigits n</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| n &lt;= 0</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= []</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| otherwise = lastDigit n : toRevDigits $ dropLastDigit n</span></p></td></tr></table></blockquote><p>Hmm. That doesn&rsquo;t work. I&rsquo;m not sure why, but I&rsquo;m <span style="font-style: italic">almost</span> certain it has to do with order of
operations. I&rsquo;m far too lazy to actually figure that out, so parens should do the job fine.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">toRevDigits :: Integer -&gt; [Integer]</span></p></td></tr><tr><td><p><span class="stt">toRevDigits n</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| n &lt;= 0</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= []</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| otherwise = lastDigit n : toRevDigits (dropLastDigit n)</span></p></td></tr></table></blockquote><p>Sure enough, that fixed things. Still, something about me doesn&rsquo;t like the asymmetry between the two
expressions on either side of the cons (is it still called that in Haskell?). I remember something
about <span class="stt">where</span> clauses; let&rsquo;s try that.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">toRevDigits :: Integer -&gt; [Integer]</span></p></td></tr><tr><td><p><span class="stt">toRevDigits n</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| n &lt;= 0</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= []</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">| otherwise = d : toRevDigits ds</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">where d</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">= lastDigit n</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">ds = dropLastDigit n</span></p></td></tr></table></blockquote><p>Well, that seemed to work, but is it nicer...? I don&rsquo;t know. Now it just seems more verbose, honestly.
I can&rsquo;t really decide, but I guess I&rsquo;ll just leave it as-is for now.</p><p>Next problem: write a <span class="stt">doubleEveryOther</span> function which does precisely what it sounds like. Aha!
Pattern-matching time.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">doubleEveryOther :: [Integer] -&gt; [Integer]</span></p></td></tr><tr><td><p><span class="stt">doubleEveryOther []</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= []</span></p></td></tr><tr><td><p><span class="stt">doubleEveryOther [x]</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= [x]</span></p></td></tr><tr><td><p><span class="stt">doubleEveryOther (x:y:ys) = x : (y * 2) : doubleEveryOther ys</span></p></td></tr></table></blockquote><p>...and it compiles! Yay, I finally did something right. I actually had to fiddle with the parens
around the last pattern&#8212;I forgot they were necessary&#8212;but otherwise everything appears to be in order.</p><p>Now, a function that sums all the digits in a list of numbers. I don&rsquo;t <span style="font-style: italic">think</span> I&rsquo;m supposed to
be aware of higher-order functions at this point in this classwork, but I don&rsquo;t really care. This is
a perfect opportunity to use them.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">sumDigits :: [Integer] -&gt; Integer</span></p></td></tr><tr><td><p><span class="stt">sumDigits = sum . concatMap toRevDigits</span></p></td></tr></table></blockquote><p>I originally typed <span class="stt">concat . map</span>, but <span class="stt">ghc-mod</span> helpfully pointed out that I could use
<span class="stt">concatMap</span> instead. I figure it&rsquo;s more efficient since it doesn&rsquo;t need to build the intermediate
list.</p><p>Finally, one more function: putting everything together to write a simple credit card validation
function. I like these sorts of problems: all the parts already exist, so it&rsquo;s obviously easy to put
them together.</p><blockquote class="code-block"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">luhn :: Integer -&gt; Bool</span></p></td></tr><tr><td><p><span class="stt">luhn n = sumDigits (doubleEveryOther $ toRevDigits n) `mod` 10 == 0</span></p></td></tr></table></blockquote><p>Done.</p><p>Well, that wasn&rsquo;t terribly interesting, though it was helpful to get used to working in the language
again. I think I&rsquo;ll go through the next assignment, and if it doesn&rsquo;t get better, I might have to
switch to something else. For now, though, I feel somewhat accomplished, despite having written an
extremely trivial set of functions.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Day_0__A_whole_lot_of_nothing.html" title="backward to &quot;1 Day 0: A whole lot of nothing&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Learning Haskell&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>